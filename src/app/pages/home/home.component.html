<mat-toolbar color="primary" class="app-toolbar">
  <span class="toolbar-title">Bidding Platform</span>
  <span class="spacer"></span>
  <button
    mat-icon-button
    (click)="toggleTheme()"
    [attr.aria-label]="isDarkTheme ? 'Switch to light mode' : 'Switch to dark mode'"
  >
    <ng-icon [name]="isDarkTheme ? 'lucideSun' : 'lucideMoon'"></ng-icon>
  </button>
</mat-toolbar>

<main class="app-shell">
  <mat-card class="material-card control-card">
    <div class="control-header">
      <div class="view-buttons">
        <button
          mat-raised-button
          color="primary"
          class="view-button"
          [routerLink]="['/reports']"
          [disabled]="isRouteActive('/reports')"
        >
          Bidding Reports
        </button>
        <button
          mat-raised-button
          color="primary"
          class="view-button"
          [routerLink]="['/tender-awards']"
          [disabled]="isRouteActive('/tender-awards')"
        >
          Tender Awards
        </button>
        <button
          mat-raised-button
          color="primary"
          class="view-button"
          [routerLink]="['/customers']"
          [disabled]="isRouteActive('/customers')"
        >
          Customer List
        </button>
        <button
          *ngIf="isCustomersRoute"
          mat-stroked-button
          class="view-button"
          (click)="showSecretPopup = true"
        >
          Customer Name Mapping
        </button>
      </div>
      <div class="selectors">
        <mat-form-field appearance="outline" class="selector">
          <mat-label>Month</mat-label>
          <mat-select [(ngModel)]="selectedMonth" (ngModelChange)="onFilterChange()">
            <mat-option *ngFor="let month of months" [value]="month">{{ month }}</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field appearance="outline" class="selector">
          <mat-label>Year</mat-label>
          <mat-select [(ngModel)]="selectedYear" (ngModelChange)="onFilterChange()">
            <mat-option *ngFor="let year of years" [value]="year">{{ year }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
  </mat-card>

  <section class="view-container">
    <router-outlet
      (activate)="onRouteActivate($event)"
      (deactivate)="onRouteDeactivate()"
    ></router-outlet>
  </section>
</main>

<div *ngIf="showSecretPopup" class="secret-dialog">
  <mat-card class="material-card secret-card">
    <header class="secret-header">
      <h3>Customer Name Mapping</h3>
      <button mat-icon-button (click)="showSecretPopup = false">
        <ng-icon name="lucideX"></ng-icon>
      </button>
    </header>
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Column 1</th>
            <th>Column 2</th>
            <th>Column 3</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let row of secretTableData">
            <td>{{ row.column1 }}</td>
            <td>{{ row.column2 }}</td>
            <td>{{ row.column3 }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </mat-card>
</div>
